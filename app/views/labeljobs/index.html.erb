<%= link_to 'New Label Job', new_labeljob_path, :class => 'btn btn-primary pull-right' %>


<h1>Labeljobs</h1>
<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Name</th>
      <th>Task Status:   <b>Approve/Submit/ALL:</b></th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @labeljobs.each do |labeljob| %>
      <tr>
        <td><%= link_to labeljob.name, labeljob_path(labeljob) %></td>
        <td>
          <span class="label label-success"><%= labeljob.labeltasks.where(:status => "approve").count %></span>/
          <span class="label label-important"><%= labeljob.labeltasks.where(:status => "submit").count %></span>/
          <span class="label label-info"><%= labeljob.labeltasks.count %></span>
        </td>
        <td>
          <%= link_to 'Edit', edit_labeljob_path(labeljob), :class => 'btn btn-mini' %>
          <%= link_to 'Destroy', labeljob_path(labeljob), :method => :delete, :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<hr>
<% if !@finishedjobs.nil? %>
  <h2 style='margin-top:40px'>Approved jobs</h2>
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th>Created at</th>
        <th>Number of Tasks</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @finishedjobs.each do |labeljob| %>
        <tr>
          <td><%= link_to labeljob.name, labeljob_path(labeljob) %></td>
          <td><%= labeljob.created_at %></td>
          <td><%= labeljob.labeltasks.count %></td>
          <td>
            <%= link_to 'Destroy', labeljob_path(labeljob), :method => :delete, :confirm => 'Are you sure?', :class => 'btn btn-mini btn-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>